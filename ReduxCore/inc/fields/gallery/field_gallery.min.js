!function(e){"use strict";redux.field_objects=redux.field_objects||{},redux.field_objects.gallery=redux.field_objects.gallery||{},e(document).ready(function(){}),redux.field_objects.gallery.init=function(i,l){l||(l=!1),i||(i=e(document).find(".redux-container-gallery:visible")),e(i).each(function(){var i=e(this),a=i;i.hasClass("redux-field-container")||(a=i.parents(".redux-field-container:first")),(l||!a.is(":hidden"))&&a.hasClass("redux-field-init")&&(a.removeClass("redux-field-init"),i.on({click:function(i){var l=e(this).closest("fieldset");if("clear-gallery"===i.currentTarget.id){{l.find(".gallery_values").val("")}return void l.find(".screenshot").html("")}if("undefined"!=typeof wp&&wp.media&&wp.media.gallery){i.preventDefault();var a,r=(e(this),l.find(".gallery_values").val());a=r?'[gallery ids="'+r+'"]':'[gallery ids="0"]';var n=wp.media.gallery.edit(a);return n.state("gallery-edit").on("update",function(e){l.find(".screenshot").html("");var i,a,r="",n=e.models.map(function(e){return i=e.toJSON(),a="undefined"!=typeof i.sizes.thumbnail?i.sizes.thumbnail.url:i.url,r="<a class='of-uploaded-image' href='"+a+"'><img class='redux-option-image' src='"+a+"' alt='' /></a>",l.find(".screenshot").append(r),e.id});l.find(".gallery_values").val(n.join(",")),redux_change(l.find(".gallery_values"))}),!1}}},".gallery-attachments"))})}}(jQuery);